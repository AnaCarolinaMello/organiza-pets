<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calendário</title>
  <link rel="icon" href="../public/img/logo.svg" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../public/css/calendario.css" />
  <link rel="stylesheet" href="../public/css/aside.css" />
  <link rel="stylesheet" href="../public/css/popup.css" />
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM="
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://unpkg.com/@popperjs/core@2"></script>

</head>

<body>
  <!-- Popup de notificacao -->
  <div id="alert">
    <h2></h2>
  </div>
  <div id="alertNoti">
    <h2></h2>
  </div>
  <div id="popupPerfil">
    <div class="activePerfil">
    </div>
    <div id="conteudoPerfil">
      <h2 id="perfilPopup">Perfil</h2>
      <h2 id="logout">Logout</h2>
    </div>
  </div>

  <div class="confirmacao" id="editCon">
    <div class="bg-white w-52 p-2 flex flex-col gap-2 justify-content-between rounded">
      <div class="relative gap-2">
        <h1 class="close" id="closeEdit">x</h1>
        <div class="confirmContent">
          <div id="divButtons" class="flex flex-row">
            <button id="btnEditar" class="bg-blue-500 p-2 rounded text-white">Editar</button>
            <button id="btnDeletar" class="bg-red-500 p-2 rounded text-white">Deletar</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Container de conteudo da tela -->
  <div id="content">
    <!-- Criação do aside -->
    <aside>
      <div id="logo">
        <img src="../public/img/logo.svg" />
      </div>
      <div id="icons">
        <div id="perfil" class="outside">
          <div class="menu-icons">
            <img src="../public/img/perfil.svg" alt="perfil" />
            <p>Perfil</p>
          </div>
          <div class="active">
            <div class="cor-interna"></div>
          </div>
        </div>
        <div id="vacina" class="outside">
          <div class="menu-icons">
            <img src="../public/img/vacina.svg" alt="Vacina" />
            <p>Vacina</p>
          </div>
          <div class="active">
            <div class="cor-interna"></div>
          </div>
        </div>
        <div id="calendario" class="outside">
          <div class="menu-icons">
            <img src="../public/img/calendario.svg" alt="calendario" />
            <p>Calendar</p>
          </div>
          <div class="active" id="activeCalendario">
            <div class="cor-interna"></div>
          </div>
        </div>
        <div id="pet" class="outside">
          <div class="menu-icons">
            <img src="../public/img/paw.svg" alt="pet" />
            <p>Animais</p>
          </div>
          <div class="active" id="activePet">
            <div class="cor-interna"></div>
          </div>
        </div>
        <div id="rotina" class="outside">
          <div class="menu-icons">
            <img src="../public/img/rotina.svg" alt="rotina" />
            <p>Rotina</p>
          </div>
          <div class="active">
            <div class="cor-interna"></div>
          </div>
        </div>
      </div>
    </aside>

    <main>
      <div id="divLoader">
        <div class="loader"></div>
      </div>
      <header>
        <h1>Tarefas</h1>
        <div id="lateral-icons">
          <div class="icons" id="divNoti">
            <div id="divNotificacao">
              <span id="haveNotification"></span>
              <img src="../public/img/notificacao.svg" alt="notificações" id="notificacao">
            </div>
            <div id="popup">
              <div class="activeNoti">
              </div>
              <div id="conteudo">
                <div id="titulo">
                  <h2 id="hojeNotificacao" class="activeNotificacao">Hoje</h2>
                  <h2 id="todas">Todas</h2>
                </div>
                <div id="underlineNoti">
                  <div id="underlineActiveNoti"></div>
                </div>
                <div id="hoje" class="cardNoti">
                </div>
                <div id="todos" class="cardNoti">

                </div>
                <div id="semNotificacoes">
                  <h2>Sem notificações</h2>
                  <img src="../public/img/notFound.svg" alt="não encontrado">
                </div>
              </div>
            </div>
          </div>
          <div class="icons">
            <img src="../public/img/perfil.svg" alt="foto de perfil" id="fotoPerfil" />
          </div>
        </div>
      </header>
      <div id="containerCalendario " class="relative">
        <div id="divAddTarefas" class="flex justify-end">
          <img src="../public/img/adicionar.svg" alt="adicionar" class="adicionar" id="adicionar"
            onclick="addClicks()" />
        </div>
        <div id="calendar" class="relative px-10 py-3"></div>
      </div>
    </main>
    <script src="../public/js/calendario.js"></script>
    <script src="../public/js/timeInApp.js"></script>
    <script>
      const events = getTarefasSemanais(database);
      document.addEventListener("DOMContentLoaded", function () {
        let calendarEl = document.getElementById("calendar");
        let fc = document.querySelector(".fc-event-inner")
        let calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: "dayGridMonth",
          events: events,
          dateClick: function (info) {
            window.location.assign(`../view/cadastrarTarefa.html?screen=3&data=${info.dateStr}`)
          },
          eventClick: function (info) {
            popEditDelete(info)
          },
          eventDidMount: function (info) {
            const eventElement = info.el;
            const popover = document.createElement("div");
            popover.className = "popover";
            popover.innerHTML = `
              <div class="popover-header">${info.event.title}</div>
              <div class="popover-body flex justify-center">${info.event.extendedProps.description ? info.event.extendedProps.description : "-"}</div>
            `;
            eventElement.addEventListener("mouseover", function () {
              document.body.appendChild(popover);
              const popperInstance = Popper.createPopper(eventElement, popover, {
                placement: "top",
              });
              eventElement.addEventListener("mouseout", function () {
                document.body.removeChild(popover);
                popperInstance.destroy();
              });
            });
          },
          locale: "pt-Br",
          eventDisplay: "block",
        });
        calendar.render();
      });
    </script>
</body>

</html>